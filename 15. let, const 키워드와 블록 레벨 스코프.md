# 15. let, const 키워드와 블록 레벨 스코프

## 15.1 var 키워드로 선언한 변수의 문제점
현재 ES6 에서는 여러 문제점 때문에 var 사용하지 않음
  1. 변수 중복 선언 허용
  2. 함수 레벨 스코프에서 전역 변수 중복 선언될 가능성 높음
  3. 변수 호이스팅

## 15.2 let 키워드
var 키워드 보완 위해 ES6 에서 새로운 변수 선언 키워드인 `let` 과 `const` 도입

### 15.2.1 변수 중복 선언 금지
```jsx
// var : 같은 스코프 내에서 중복 선언 허용하는 문제가 있음
var foo = 123;
var foo = 456;

let bar = 123;
let bar = 456; // SyntaxError: ~has already been declared
```

### 15.2.2 블록 레벨 스코프
```jsx
let foo = 1;           // 전역 변수

{
  console.log(foo);   // cannot access foo ~ before initialization
  let foo = 2;        // 지역 변수
  let bar = 3;        // 지역 변수
  console.log(foo);   // 2
}

console.log(foo); // 1
console.log(bar); // ReferenceError: bar is not defined
```

```jsx
let i = 10;                   // 전역 스코프

function foo() {             // 함수 레벨 스코프
  let i = 100;

  for (let i=1; i<3; i++){   // 블록 레벨 스코프
    console.log(i); // 1, 2
  }
  console.log(i); // 100
}
foo();

console.log(i); // 10
``` 

### 15.2.3 변수 호이스팅
- var 키워드로 선언한 변수와 달리 let 키워드로 선언한 변수는 변수 호이스팅이 발생하지 않는 것처럼 동작함
```jsx
// let 예시

console.log(foo); // foo is not defined (~cannot access before initialization)
let foo;
```
- var 키워드로 선언한 변수는 런타임 이전에 선언 단계와 초기화 단계가 실행되기 때문에 변수 선언문 이전에 변수 참조 가능함
- let 키워드로 선언한 변수는 스코프의 시작 지점~초기화 단계 시작 지점까지 변수를 참조할 수 없음. 이를 `일시적 사각지대, TDZ`이라고 부름
```jsx
// var 예시
console.log(foo); // undefined

var foo;
console.log(foo); // undefined

foo = 1; // 할당문에서 할당 단계 실행

// let 예시
console.log(foo); // ReferenceError

let foo;
console.log(foo); // undefined

foo = 1; // 할당문에서 할당 단계 실행
```
- let 키워드로 선언한 변수는 변수 호이스팅이 발생하지 않는 것처럼 보이지만, 여전히 호이스팅 발생함

## 15.3 const 키워드

### 15.3.1 선언과 초기화
- const 키워드로 선언한 변수는 선언과 초기화 동시에 해야 함
- let 키워드로 선언한 변수와 마찬가지로 블록 레벨 스코프를 갖고, 변수 호이스팅이 발생하지 않는 것처럼 동작함

### 15.3.2 재할당 금지
- var, let 키워드로 선언한 변수는 재할당 가능하나. const 는 재할당 불가능함

### 15.3.3 상수
- 상수: 재할당이 금지된 변수
- const 키워드로 선언한 변수에 원시 값을 할당한 경우 원시 값은 변경할 수 없는 값이며, const 키워드에 의해 재할당이 금지되므로 할당된 값을 변경 방법은 없음
- 일반적으로 대문자로 선언함하며 스네이크 케이스 사용
```jsx
const TAX_RATE = 0.1;
```

### 15.3.4 const 키워드와 객체
- const 키워드로 선언된 변수에 객체를 할당한 경우에는 값을 변경 가능함
- 이때 객체가 변경되더라도 변수에 할당된 참조 값은 변경되지 않음

> ES6를 사용한다면 var 키워드는 사용하지 말 것  
> 재할당이 필요한 경우에 제한적으로 let 키워드 사용하며 변수의 스코프는 최대한 작게 함.  
> 읽기 전용으로 쓰거나 재할당하지 않는 원시 값과 객체에는 const 키워드 사용

